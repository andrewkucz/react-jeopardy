{"version":3,"sources":["helpers.js","components/GameBoard/GameTile/index.jsx","components/GameBoard/index.jsx","questions.js","components/Question/index.jsx","components/Controls/index.jsx","components/ScoreBoard/index.jsx","Game.js","index.js"],"names":["groupByProp","prop","array","reduce","acc","val","groupBy","Array","isArray","concat","groupByValue","groupByCategory","getInitQuestions","csvText","questions","allText","commaPlaceHolder","allTextLines","split","map","line","replace","match","headers","lines","i","length","data","temp","j","value","trim","Number","isInteger","parseInt","reg","RegExp","push","processData","answered","groupedByCategory","Object","keys","cat","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","GameTile","isHeader","category","question","answer","rest","displayValue","className","questionsCsv","Blob","type","GameBoard","questionMap","setQuestion","possibleOtherKeys","categories","rowCount","cur","getRowCount","style","gridTemplateColumns","gridTemplateRows","colIndex","questionValues","Fragment","gridArea","questionValue","rowIndex","onClick","href","URL","createObjectURL","download","join","Question","goBack","markAnswered","users","clickerKeys","clickerQueue","setClickerQueue","showAnswer","setShowAnswer","addToQueue","useCallback","u","cq","includes","clearQueue","useEffect","onKeyDown","e","findIndex","code","addEventListener","removeEventListener","position","bottom","left","minHeight","filter","Controls","addUser","clearUsers","resetScores","setQuestions","setClickerKey","height","display","flexDirection","justifyContent","id","onChange","fileUpload","document","getElementById","test","toLowerCase","FileReader","reader","onload","target","result","readAsText","files","alert","accept","click","overflow","str","stripped","letter","marginTop","padding","width","marginRight","p","prompt","ScoreBoard","scores","initQuestionMap","initUsers","Content","selected","setSelected","q","Game","setQuestionMap","setUsers","setScores","setClickerKeys","sc","user","qm","newUser","cks","Index","basename","process","exact","path","ReactDOM","render","StrictMode"],"mappings":"8OAgCO,SAASA,EAAYC,GAC1B,OAAO,SAAAC,GAAK,OAAIA,EAAMC,QAAO,SAACC,EAAKC,GACjC,IAAMC,EAAUD,EAAIJ,GAWpB,OAVGG,EAAIE,GACFC,MAAMC,QAAQJ,EAAIE,IACnBF,EAAIE,GAAWF,EAAIE,GAASG,OAAOJ,GAEnCD,EAAIE,GAAW,CAACF,EAAIE,GAAUD,GAIhCD,EAAIE,GAAWD,EAEVD,IACN,KAGL,IAAMM,EAAeV,EAAY,SAC3BW,EAAkBX,EAAY,YAE7B,SAASY,EAAiBC,GAC/B,IAAMC,EAlDD,SAAqBC,GAKxB,IAJA,IAAMC,EAAmB,cACrBC,EAAeF,EAAQG,MAAM,WAAWC,KAAI,SAAAC,GAAI,OAAIA,EAAKC,QAAQ,gBAAgB,SAAAC,GAAK,OAAIA,EAAMD,QAAQ,KAAML,SAC9GO,EAAUN,EAAa,GAAGC,MAAM,KAChCM,EAAQ,GACHC,EAAE,EAAGA,EAAER,EAAaS,OAAQD,IAAK,CAEtC,IAAIE,EAAOV,EAAaQ,GAAGP,MAAM,KACjC,GAAIS,EAAKD,SAAWH,EAAQG,OAAQ,CAEhC,IADA,IAAIE,EAAO,GACFC,EAAE,EAAGA,EAAEN,EAAQG,OAAQG,IAAK,CAEjC,IAAIC,EAAQH,EAAKE,GAAGE,OAEpB,GAAGC,OAAOC,UAAUC,SAASJ,IAC3BA,EAAQI,SAASJ,QACZ,GAAGA,EAAMT,QAAS,CACvB,IAAMc,EAAM,IAAIC,OAAJ,UAAcpB,GAAoB,KAC9Cc,EAAQA,EAAMT,QAAQc,EAAK,KAG7BP,EAAKL,EAAQM,IAAMC,EAEvBN,EAAMa,KAAKT,IAGnB,OAAOJ,EAwBSc,CAAYzB,GAASM,KAAI,SAAAd,GAAG,kCAASA,GAAT,IAAckC,UAAU,OAChEC,EAAoB7B,EAAgBG,GAE1C,OAAO2B,OAAOC,KAAKF,GAAmBrC,QAAO,SAACC,EAAKuC,GAEjD,OADAvC,EAAIuC,GAAOjC,EAAa8B,EAAkBG,IACnCvC,IACN,IAiBE,SAASwC,EAAgBC,EAAKC,GAGnC,MAAsCC,oBAAS,WAC7C,IAEE,IAAMC,EAAOC,OAAOC,aAAaC,QAAQN,GAEzC,OAAOG,EAAOI,KAAKC,MAAML,GAAQF,EACjC,MAAOQ,GAGP,OADAC,QAAQC,IAAIF,GACLR,MATX,mBAAOW,EAAP,KAAoBC,EAApB,KA4BA,MAAO,CAACD,EAdS,SAAC3B,GAChB,IAEE,IAAM6B,EACJ7B,aAAiB8B,SAAW9B,EAAM2B,GAAe3B,EAEnD4B,EAAeC,GAEfV,OAAOC,aAAaW,QAAQhB,EAAKO,KAAKU,UAAUH,IAChD,MAAOL,GAEPC,QAAQC,IAAIF,M,0FCrFHS,EAhBE,SAAC,GAAsE,IAArEC,EAAoE,EAApEA,SAA4BC,GAAwC,EAA1DC,SAA0D,EAAhDC,OAAgD,EAAxCF,UAAUnC,EAA8B,EAA9BA,MAAOS,EAAuB,EAAvBA,SAAa6B,EAAU,iBAE/EC,EAAeL,EAAWC,EAAY1B,EAA2D,GAAhD,qCAAE,sBAAM+B,UAAU,SAAhB,eAAkCxC,KACrFwC,EAAYN,EAAW,WAAa,QAE1C,OACE,6CAAKM,UAAWA,EAAY,SAAaF,GAAzC,aACGC,MCADE,EAAe,IAAIC,KAAK,CCVd,gjCDUkC,CAACC,KAAM,eA0C1CC,EAxCG,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,YAAaC,EAAoC,EAApCA,YAAaC,EAAuB,EAAvBA,kBACtCC,EAAarC,OAAOC,KAAKiC,GACzBI,EFkDD,SAAqBJ,GAC1B,OAAOlC,OAAOC,KAAKiC,GAAaxE,QAAO,SAACC,EAAKyC,GAC3C,IAAImC,EAAMvC,OAAOC,KAAKiC,EAAY9B,IAAMnB,QAAU,EAIlD,OAHGsD,EAAM5E,IACPA,EAAM4E,GAED5E,IACN,GAAK,EEzDS6E,CAAYN,GAE7B,OACE,mCAEEG,EAAWpD,OAAS,EAAI,qBAAKwD,MAAO,CAACC,oBAAoB,UAAD,OAAYL,EAAWpD,OAAvB,YAZhD,MAYgD,KAA8C0D,iBAAiB,UAAD,OAAYL,EAAZ,aAX7G,MAW6G,MAAwCT,UAAU,aAAhJ,SACvBQ,EAAW3D,KAAI,SAAC8C,EAAUoB,GACzB,IAAMC,EAAiB7C,OAAOC,KAAKiC,EAAYV,IAC/C,OAAO,eAAC,IAAMsB,SAAP,WACL,cAAC,EAAD,CAAUtB,SAAUA,EAAUD,UAAQ,EAACkB,MAAO,CAACM,SAAS,GAAD,OAAK,EAAL,MAAYH,EAAS,MAC3EC,EAAenE,KAAI,SAACsE,EAAeC,GACpC,IAAMxB,EAAWS,EAAYV,GAAUwB,GACvC,OAAO,cAAC,EAAD,aAA0CP,MAAO,CAACM,SAAS,GAAD,OAAKE,EAAS,EAAE,EAAhB,cAAuBL,EAAS,IAAMM,QAAS,kBAAMf,EAAYV,KAAeA,GAA3HmB,EAAW,IAAMK,QAJbzB,QAQvB,qBAAKK,UAAU,cAAf,SACP,sBAAKA,UAAU,YAAf,4HAA0I,0CAA1I,KAA6J,wCAA7J,KAA8K,0CAA9K,KAAiM,uCACjM,0CACW,mBAAGsB,KAAMC,IAAIC,gBAAgBvB,GAAewB,SAAS,uBAArD,iCAEX,yIAGA,uGACyElB,EAAkBmB,KAAK,MADhG,e,QE+CSC,EAlFE,SAAC,GAA6E,IAA5E/B,EAA2E,EAA3EA,SAAUgC,EAAiE,EAAjEA,OAAQC,EAAyD,EAAzDA,aAAcC,EAA2C,EAA3CA,MAAOC,EAAoC,EAApCA,YAAaxB,EAAuB,EAAvBA,kBAErE,EAAwC9B,mBAAS,IAAjD,mBAAOuD,EAAP,KAAqBC,EAArB,KACA,EAAoCxD,oBAAS,GAA7C,mBAAOyD,EAAP,KAAmBC,EAAnB,KAGMC,EAAaC,uBACjB,SAACC,GACCL,GAAgB,SAAAM,GACd,OAAGA,EAAGC,SAASF,GACNC,EAED,GAAN,mBAAWA,GAAX,CAAeD,SAIrB,CAACL,IAEGQ,EAAaJ,uBACjB,WACEJ,EAAgB,MAElB,CAACA,IAiBH,OAdAS,qBAAU,WACR,SAASC,EAAUC,GACjB,IAAIzF,EAAI2E,EAAMe,WAAU,SAAAP,GAAC,OAAIP,EAAYO,KAAOM,EAAErE,QACxC,IAAPpB,GAAYoD,EAAkBiC,SAASI,EAAEE,QAC1C3F,EAAI2E,EAAMe,WAAU,SAAAP,GAAC,OAAIP,EAAYO,KAAOM,EAAEE,UAErC,IAAP3F,GACFiF,EAAWN,EAAM3E,IAIrB,OADAwB,OAAOoE,iBAAiB,UAAWJ,GAC5B,kBAAMhE,OAAOqE,oBAAoB,UAAWL,MAClD,CAACb,EAAOC,IAGT,sBAAK/B,UAAU,gBAAf,UACE,wBAAQA,UAAU,UAAUqB,QAAS,WACnCO,IACAa,KAFF,2BAIA,sBAAKzC,UAAU,gBAAf,UACE,kDACGgC,EAAanF,KAAI,SAACyF,EAAGnF,GACpB,OAAO,gCAAcA,EAAE,EAAhB,KAAqBmF,IAAXA,SAGvB,qBAAK1B,MAAO,CAACqC,SAAU,WAAYC,OAAQ,OAAQC,KAAM,QAAzD,SACE,wBAAQ9B,QAAS,kBAAMQ,EAAajC,IAApC,6BAEF,sBAAKI,UAAU,SAAf,UACE,sBAAKA,UAAU,QAAf,cAAyBJ,EAASpC,SAClC,8BAAMoC,EAASD,cAEjB,qBAAKK,UAAU,OAAf,SACGkC,EAAatC,EAASC,OAASD,EAASA,WAE3C,qBAAKgB,MAAO,CAACwC,UAAW,IAAxB,UACElB,GAAcF,EAAa5E,OAAS,GAAK,wBAAQiE,QAAS,kBAAMc,GAAc,IAArC,2BAE1CH,EAAa5E,OAAS,GAAK,qCAAE,mDAG9B,8BACG0E,EAAMuB,QAAO,SAAAf,GAAC,OAAIN,EAAaQ,SAASF,MAAIzF,KAAI,SAAAyF,GAAC,OAAI,wBAAQtC,UAAU,gBAAwBqB,QAAS,WACvGQ,EAAajC,EAAU0C,GACvBG,KAFoD,SAGlDH,GAHyFA,eCOtFgB,EA3EE,SAAC,GAA8G,IAA5GC,EAA2G,EAA3GA,QAASC,EAAkG,EAAlGA,WAAYC,EAAsF,EAAtFA,YAAaC,EAAyE,EAAzEA,aAAc5B,EAA2D,EAA3DA,MAAOC,EAAoD,EAApDA,YAAa4B,EAAuC,EAAvCA,cAAepD,EAAwB,EAAxBA,kBA0BrG,OACE,sBAAKK,MAAO,CAACgD,OAAQ,OAAQC,QAAS,OAAQC,cAAe,SAAUC,eAAgB,iBAAvF,UACE,gCACE,0CACA,gCACE,qBAAKnD,MAAO,CAACiD,QAAS,QAAtB,SACE,uBAAO1D,KAAK,OAAO6D,GAAG,aAAaC,SAzB1B,SAAArB,GACnB,IAAIsB,EAAaC,SAASC,eAAe,cAEvC,GADU,uCACAC,KAAKH,EAAW1G,MAAM8G,eAC5B,GAA2B,oBAAfC,WAA4B,CACpC,IAAIC,EAAS,IAAID,WACjBC,EAAOC,OAAS,SAAU7B,GACtBc,EAAad,EAAE8B,OAAOC,SAE1BH,EAAOI,WAAWV,EAAWW,MAAM,SAEnCC,MAAM,6CAGVA,MAAM,oCAWyDC,OAAO,WAEpE,wBAAQ1D,QAhCG,WACA8C,SAASC,eAAe,cAC9BY,SA8BL,kCACA,wBAAQ3D,QAAS,kBAAMqC,EAAa,KAApC,gCAEF,2BAKD5B,GAASA,EAAM1E,OAAS,GAAK,sBAAKwD,MAAO,CAACqE,SAAU,QAAvB,0BAE5B,8BACGnD,EAAMjF,KAAI,SAAAyF,GAET,IL6DmB4C,EK7DbC,GL6DaD,EK7DanD,EAAYO,IL8D/ClF,QAAU,EACR8H,EAEFA,EAAItI,MAAM,IAAIyG,QAAO,SAAA+B,GAAM,OAAIA,EAAOd,gBAAkBc,KAAQ1D,KAAK,IKhE5DmC,EAA6B,MAAnB9B,EAAYO,GAAa,MAAS6C,GAAQ,MAE1D,OAAO,sBAAavE,MAAO,CAACyE,UAAW,IAAhC,UACL,wBAAQzE,MAAO,CAACiD,QAAS,eAAgByB,QAAS,UAAWC,MAAO,OAAQC,YAAa,UAAWnE,QAAS,WAC3G,IAAIoE,EAAI9G,OAAO+G,OAAP,uDAA8DpD,IAClEmD,GAAkB,IAAbA,EAAErI,QAAiBmD,EAAkBiC,SAASiD,GACrD9B,EAAcrB,EAAGmD,GAEjBX,MAAM,gGAAkGvE,EAAkBmB,KAAK,MAAQ,MAL3I,SAOMmC,IAAkBvB,IARTA,WAcvB,gCACKkB,GAAc,wBAAQnC,QAASmC,EAAjB,2BACdC,GAAe,wBAAQpC,QAASoC,EAAjB,0BACfF,GAAW,wBAAQlC,QAASkC,EAAjB,+BChDPoC,EApBI,SAAC,GAAqB,IAApB7D,EAAmB,EAAnBA,MAAO8D,EAAY,EAAZA,OAE1B,OAAI9D,GAAUA,EAAM1E,OAQZ,qBAAKwD,MAAO,CAACC,oBAAoB,UAAD,OAAYiB,EAAM1E,OAAlB,UAAkC0D,iBAAiB,eAAiBd,UAAU,cAA9G,SACL8B,EAAMjF,KAAI,SAAAyF,GACT,OAAO,sBAAatC,UAAU,iBAAvB,UACL,qBAAKA,UAAU,OAAf,SAAuBsC,IACvB,sBAAKtC,UAAU,eAAf,UAA8B,sBAAMA,UAAU,SAAhB,eAAkC4F,EAAOtD,QAFxDA,QATX,qBAAKtC,UAAU,eAAf,SACR,qBAAKA,UAAU,YAAf,qDCEE6F,EAAkB,GAClBC,EAAY,GACZvF,EAAoB,CAAC,cAAe,eAAgB,YAAa,aAAa,YAAa,UAAW,UAAW,WAAY,YAAa,aAAc,SAG9J,SAASwF,EAAT,GAA8F,IAA5E1F,EAA2E,EAA3EA,YAAawB,EAA8D,EAA9DA,aAAcC,EAAgD,EAAhDA,MAAO8D,EAAyC,EAAzCA,OAAQ7D,EAAiC,EAAjCA,YAAaxB,EAAoB,EAApBA,kBAEvE,EAAgC9B,mBAAS,MAAzC,mBAAOuH,EAAP,KAAiBC,EAAjB,KAEMrE,EAASS,uBAAY,WACzB4D,EAAY,QACX,CAACA,IAEJ,OAAGD,EACM,cAAC,EAAD,CAAUpG,SAAUoG,EAAUnE,aAAc,SAACqE,EAAG5D,GACrDT,EAAaqE,EAAG5D,GAChB2D,EAAY,OACXrE,OAAQA,EAAQE,MAAOA,EAAOC,YAAaA,EAAaxB,kBAAmBA,IAGxE,cAAC,EAAD,CAAWA,kBAAmBA,EAAmBF,YAAaA,EAAaC,YAAa2F,EAAaL,OAAQA,IA0FxGO,MAvFf,WAEE,MAAsC7H,EAAgB,cAAeuH,GAArE,mBAAOxF,EAAP,KAAoB+F,EAApB,KACA,EAA0B9H,EAAgB,QAASwH,GAAnD,mBAAOhE,EAAP,KAAcuE,EAAd,KACA,EAA4B/H,EAAgB,aAAc,IAA1D,mBAAOsH,EAAP,KAAeU,EAAf,KAEA,EAAsChI,EAAgB,kBAAmB,IAAzE,mBAAOyD,EAAP,KAAoBwE,EAApB,KAEA7D,qBAAU,WACR4D,GAAU,SAAAE,GACR,OAAO1E,EAAMjG,QAAO,SAACC,EAAK2K,GAExB,OADA3K,EAAI2K,GAAQD,EAAGC,IAAS,EACjB3K,IACN,OAELyK,GAAe,SAAAC,GACb,OAAO1E,EAAMjG,QAAO,SAACC,EAAK2K,GAExB,OADA3K,EAAI2K,GAAQD,EAAGC,IAAS,GACjB3K,IACN,SAEJ,CAACgG,IAEJ,IAAMD,EAAeQ,uBAAY,SAACzC,EAAU6G,GAC1CL,GAAe,SAAAM,GAAE,kCACZA,GADY,kBAEd9G,EAASD,SAFK,2BAGV+G,EAAG9G,EAASD,WAHF,kBAIZC,EAASpC,MAJG,2BAKRoC,EAASpC,OALD,IAMXS,UAAU,WAIbwI,GACDH,GAAU,SAAAE,GAAE,kCACPA,GADO,kBAETC,EAAOD,EAAGC,GAAQ7G,EAASpC,aAG/B,CAAC4I,EAAgBE,IAEd/C,EAAUlB,uBAAY,WAC1B,IAAIsE,EAAUhI,OAAO+G,OAAP,uBAA8B5D,EAAM1E,OAAO,EAA3C,WACXuJ,GACDN,GAAS,SAAA/D,GAAC,OAAIA,EAAEnG,OAAOwK,QAExB,CAACN,EAAUvE,IAER0B,EAAanB,uBAAY,WAC7BgE,EAAS,MACR,CAACA,IAEE5C,EAAcpB,uBAAY,WAC9BiE,EAAUxE,EAAMjG,QAAO,SAACC,EAAKwG,GAE3B,OADAxG,EAAIwG,GAAK,EACFxG,IACN,OACF,CAACgG,EAAOwE,IAEL5C,EAAerB,uBAAY,SAAC9F,GAChC6J,EAAe9J,EAAiBC,MAC/B,CAAC6J,IAEEzC,EAAgBtB,uBAAY,SAACC,EAAG/D,GAChC+D,GAGJiE,GAAe,SAAAK,GAAG,kCACbA,GADa,kBAEftE,EAAI/D,GAAO,UAEb,CAACgI,IAIJ,OAAO,qCACP,qBAAKvG,UAAU,WAAf,SACE,cAAC,EAAD,CAAUO,kBAAmBA,EAAmBoD,cAAeA,EAAe7B,MAAOA,EAAOyB,QAASA,EAASC,WAAY1B,EAAM1E,OAAS,GAAKoG,EAAYC,YAAa3B,EAAM1E,OAAS,GAAKqG,EAAaC,aAAcA,EAAc3B,YAAaA,MAEnP,sBAAK/B,UAAU,OAAf,UACE,cAAC+F,EAAD,CAASxF,kBAAmBA,EAAmBF,YAAaA,EAAayB,MAAOA,EAAO8D,OAAQA,EAAQ/D,aAAcA,EAAcE,YAAaA,IAChJ,cAAC,EAAD,CAAYD,MAAOA,EAAO8D,OAAQA,W,eCvGhCiB,EAAQ,WACZ,OAAO,cAAC,IAAD,CAAQC,SAAUC,oBAAlB,SACP,cAAC,IAAD,UACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAAC,EAAD,WAMNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFjD,SAASC,eAAe,W","file":"static/js/main.bd36ca33.chunk.js","sourcesContent":["import { useState } from 'react'\r\n\r\n\r\nexport function processData(allText) {\r\n    const commaPlaceHolder = '{{{comma}}}'\r\n    var allTextLines = allText.split(/\\r\\n|\\n/).map(line => line.replace(/(\".+[,].+\")/g, match => match.replace(/,/g, commaPlaceHolder)));\r\n    var headers = allTextLines[0].split(',');\r\n    var lines = [];\r\n    for (var i=1; i<allTextLines.length; i++) {\r\n        \r\n        var data = allTextLines[i].split(',');\r\n        if (data.length === headers.length) {\r\n            var temp = {};\r\n            for (var j=0; j<headers.length; j++) {\r\n\r\n                let value = data[j].trim()\r\n\r\n                if(Number.isInteger(parseInt(value))) {\r\n                  value = parseInt(value)\r\n                } else if(value.replace) {\r\n                  const reg = new RegExp(`${commaPlaceHolder}`, 'g')\r\n                  value = value.replace(reg, ',')\r\n                }\r\n\r\n                temp[headers[j]] = value;\r\n            }\r\n            lines.push(temp);\r\n        }\r\n    }\r\n    return lines;\r\n}\r\n\r\nexport function groupByProp(prop) {\r\n  return array => array.reduce((acc, val) => {\r\n    const groupBy = val[prop]\r\n    if(acc[groupBy]) {\r\n      if(Array.isArray(acc[groupBy])) {\r\n        acc[groupBy] = acc[groupBy].concat(val)\r\n      } else {\r\n        acc[groupBy] = [acc[groupBy], val]\r\n      }\r\n\r\n    } else {\r\n      acc[groupBy] = val\r\n    }\r\n    return acc\r\n  }, {})\r\n}\r\n\r\nconst groupByValue = groupByProp('value')\r\nconst groupByCategory = groupByProp('category')\r\n\r\nexport function getInitQuestions(csvText) {\r\n  const questions = processData(csvText).map(val => ({...val, answered: false}))\r\n  const groupedByCategory = groupByCategory(questions)\r\n\r\n  return Object.keys(groupedByCategory).reduce((acc, cat) => {\r\n    acc[cat] = groupByValue(groupedByCategory[cat])\r\n    return acc\r\n  }, {})\r\n  \r\n}\r\n\r\n\r\nexport function getRowCount(questionMap) {\r\n  return Object.keys(questionMap).reduce((acc, key) => {\r\n    let cur = Object.keys(questionMap[key]).length || 0\r\n    if(cur > acc) {\r\n      acc = cur\r\n    }\r\n    return acc\r\n  }, 0) + 1\r\n  // add one for category row\r\n}\r\n\r\n// Hook\r\nexport function useLocalStorage(key, initialValue) {\r\n  // State to store our value\r\n  // Pass initial state function to useState so logic is only executed once\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n      const item = window.localStorage.getItem(key);\r\n      // Parse stored json or if none return initialValue\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n  // Return a wrapped version of useState's setter function that ...\r\n  // ... persists the new value to localStorage.\r\n  const setValue = (value) => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      // Save to local storage\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n      console.log(error);\r\n    }\r\n  };\r\n  return [storedValue, setValue];\r\n}\r\n\r\n\r\nexport function stripLowerCase(str) {\r\n  if(str.length <= 1) {\r\n    return str\r\n  }\r\n  return str.split('').filter(letter => letter.toLowerCase() !== letter).join('')\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst GameTile = ({isHeader, question, answer, category, value, answered, ...rest}) => {\r\n\r\n  const displayValue = isHeader ? category : !answered ? <><span className=\"dollar\">$</span>{value}</> : ''\r\n  const className = isHeader ? 'category' : 'score'\r\n\r\n  return (\r\n    <div className={className + ' blue'} {...rest}>\r\n      {displayValue}\r\n    </div>\r\n  )\r\n}\r\n\r\nGameTile.propTypes = {\r\n\r\n}\r\n\r\nexport default GameTile","import React from 'react'\r\nimport './styles.css'\r\nimport GameTile from './GameTile'\r\nimport { getRowCount } from '../../helpers'\r\nimport sample_questions from '../../questions'\r\n\r\n//@TODO fix min height and stuff for different cases\r\nconst colWidth = `1fr`\r\nconst rowHeight = `1fr`\r\n\r\nconst questionsCsv = new Blob([sample_questions], {type: 'text/plain'});\r\n\r\nconst GameBoard = ({questionMap, setQuestion, possibleOtherKeys}) => {\r\n  const categories = Object.keys(questionMap)\r\n  const rowCount = getRowCount(questionMap)\r\n\r\n  return (\r\n    <>\r\n    {\r\n      categories.length > 0 ? <div style={{gridTemplateColumns: `repeat(${categories.length},${colWidth})`, gridTemplateRows: `repeat(${rowCount}, ${rowHeight})`}} className=\"game-board\">\r\n      {categories.map((category, colIndex) => {\r\n        const questionValues = Object.keys(questionMap[category])\r\n        return <React.Fragment key={category}>\r\n          <GameTile category={category} isHeader style={{gridArea: `${1} / ${colIndex+1}`}} />\r\n          {questionValues.map((questionValue, rowIndex) => {\r\n          const question = questionMap[category][questionValue]\r\n          return <GameTile key={colIndex + '_' + rowIndex} style={{gridArea: `${rowIndex+1+1} / ${colIndex+1}`}} onClick={() => setQuestion(question)} {...question} />\r\n        })}\r\n        </React.Fragment>\r\n      })}\r\n    </div> : <div className=\"board empty\">\r\n      <div className=\"max-width\">Import questions from a CSV fie using the button on the left. CSV file must have the following column headers: <em>question</em>, <em>answer</em>, <em>category</em>, <em>value</em>\r\n      <p>\r\n        Download <a href={URL.createObjectURL(questionsCsv)} download=\"sample_questions.csv\">example csv file</a>\r\n      </p>\r\n      <p>\r\n        Be sure to set the clicker key for each player on the left by clicking the \"Set\" button for each player.\r\n      </p>\r\n      <p>\r\n        The clicker key can be any single character, or one of the following: {possibleOtherKeys.join(', ')}.\r\n      </p>\r\n      </div>\r\n      </div>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nGameBoard.propTypes = {\r\n\r\n}\r\n\r\nexport default GameBoard","const exampleCsv = `question,answer,category,value\r\nquestion1,answer1,category1,200\r\nquestion2,answer2,category1,400\r\nquestion3,answer3,category1,600\r\nquestion4,answer4,category1,800\r\nquestion5,answer5,category1,1000\r\nquestion6,answer6,category2,200\r\nquestion7,answer7,category2,400\r\nquestion8,answer8,category2,600\r\nquestion9,answer9,category2,800\r\nquestion10,answer10,category2,1000\r\nquestion11,answer11,category3,200\r\nquestion12,answer12,category3,400\r\nquestion13,answer13,category3,600\r\nquestion14,answer14,category3,800\r\nquestion15,answer15,category3,1000\r\nquestion16,answer16,category4,200\r\nquestion17,answer17,category4,400\r\nquestion18,answer18,category4,600\r\nquestion19,answer19,category4,800\r\nquestion20,answer20,category4,1000\r\nquestion21,answer21,category5,200\r\nquestion22,answer22,category5,400\r\nquestion23,answer23,category5,600\r\nquestion24,answer24,category5,800\r\nquestion25,answer25,category5,1000\r\nquestion26,answer21,category6,200\r\nquestion27,answer22,category6,400\r\nquestion28,answer23,category6,600\r\nquestion29,answer24,category6,800\r\nquestion30,answer25,category6,1000`\r\n\r\n\r\n\r\nexport default exampleCsv","import React, { useState, useEffect, useCallback } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Question = ({question, goBack, markAnswered, users, clickerKeys, possibleOtherKeys}) => {\r\n\r\n  const [clickerQueue, setClickerQueue] = useState([])\r\n  const [showAnswer, setShowAnswer] = useState(false)\r\n\r\n\r\n  const addToQueue = useCallback(\r\n    (u) => {\r\n      setClickerQueue(cq => {\r\n        if(cq.includes(u)) {\r\n          return cq\r\n        } else {\r\n          return [...cq, u]\r\n        }\r\n      })\r\n    },\r\n    [setClickerQueue],\r\n  )\r\n  const clearQueue = useCallback(\r\n    () => {\r\n      setClickerQueue([])\r\n    },\r\n    [setClickerQueue],\r\n  )\r\n\r\n  useEffect(() => {\r\n    function onKeyDown(e) {\r\n      let i = users.findIndex(u => clickerKeys[u] === e.key)\r\n      if(i === -1 && possibleOtherKeys.includes(e.code)) {\r\n        i = users.findIndex(u => clickerKeys[u] === e.code)\r\n      }\r\n      if (i !== -1) {\r\n        addToQueue(users[i])\r\n      }\r\n    }\r\n    window.addEventListener('keydown', onKeyDown);\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, [users, clickerKeys])\r\n\r\n  return (\r\n    <div className=\"question blue\">\r\n      <button className=\"go-back\" onClick={() => {\r\n        goBack()\r\n        clearQueue()\r\n      }}>Back to Board</button>\r\n      <div className=\"clicker-queue\">\r\n        <strong>Buzzer Order</strong>\r\n          {clickerQueue.map((u, i) => {\r\n            return <div key={u}>{i+1}. {u}</div>\r\n          })}\r\n      </div>\r\n      <div style={{position: 'absolute', bottom: '1rem', left: '1rem'}}>\r\n        <button onClick={() => markAnswered(question)}>No one got it</button>\r\n      </div>\r\n      <div className=\"header\">\r\n        <div className=\"score\">${question.value}</div>\r\n        <div>{question.category}</div>\r\n      </div>\r\n      <div className=\"text\">\r\n        {showAnswer ? question.answer : question.question}\r\n      </div>\r\n      <div style={{minHeight: 35}}>\r\n      {!showAnswer && clickerQueue.length > 0 && <button onClick={() => setShowAnswer(true)}>Show Answer</button>}\r\n      </div>\r\n      {clickerQueue.length > 0 && <><p>\r\n        Award question to:\r\n      </p>\r\n      <div>\r\n        {users.filter(u => clickerQueue.includes(u)).map(u => <button className=\"player-button\" key={u} onClick={() => {\r\n          markAnswered(question, u)\r\n          clearQueue()\r\n        }}>{u}</button>)}\r\n      </div>      \r\n      </>}\r\n    </div>\r\n  )\r\n}\r\n\r\nQuestion.propTypes = {\r\n\r\n}\r\n\r\nexport default Question","import React from 'react'\r\nimport { stripLowerCase } from '../../helpers';\r\n\r\nconst Controls = ({ addUser, clearUsers, resetScores, setQuestions, users, clickerKeys, setClickerKey, possibleOtherKeys }) => {\r\n\r\n  const processCsv = () => {\r\n    var fileUpload = document.getElementById(\"fileUpload\");\r\n    fileUpload.click()\r\n}\r\n\r\nconst onFileChange = e => {\r\n  var fileUpload = document.getElementById(\"fileUpload\");\r\n  var regex = /^([a-zA-Z0-9\\s_\\\\.\\-:])+(.csv|.txt)$/;\r\n    if (regex.test(fileUpload.value.toLowerCase())) {\r\n        if (typeof (FileReader) != \"undefined\") {\r\n            var reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                setQuestions(e.target.result)\r\n            }\r\n            reader.readAsText(fileUpload.files[0]);\r\n        } else {\r\n            alert(\"This browser does not support HTML5.\");\r\n        }\r\n    } else {\r\n        alert(\"Please upload a valid CSV file.\");\r\n    }\r\n}\r\n\r\n\r\n  return (\r\n    <div style={{height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'space-between'}}>\r\n      <div>\r\n        <h2>Controls</h2>\r\n        <div>\r\n          <div style={{display: 'none'}}>\r\n            <input type=\"file\" id=\"fileUpload\" onChange={onFileChange} accept=\".csv\"/>\r\n          </div>\r\n          <button onClick={processCsv}>Import Questions CSV</button>\r\n          <button onClick={() => setQuestions('')}>Clear Questions</button>\r\n        </div>\r\n        <div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n      {users && users.length > 0 && <div style={{overflow: 'auto'}}>\r\n        Clicker Keys:\r\n        <div>\r\n          {users.map(u => {\r\n\r\n            const stripped = stripLowerCase(clickerKeys[u])\r\n            const display = clickerKeys[u] === ' ' ? 'Spc' : (stripped || `Set`)\r\n\r\n            return <div key={u} style={{marginTop: 10}}>\r\n              <button style={{display: 'inline-block', padding: '6px 0px', width: '2rem', marginRight: '0.5rem'}} onClick={() => {\r\n                let p = window.prompt(`Enter a single key to set as the clicker for ${u}`)\r\n                if((p && p.length === 1) || possibleOtherKeys.includes(p)) {\r\n                  setClickerKey(u, p)\r\n                } else {\r\n                  alert('Please enter a valid key for the clicker. Either a single character or one of the following: ' + possibleOtherKeys.join(', ') + '.')\r\n                }\r\n                }}>{display}</button>{u}\r\n            </div>\r\n          })}\r\n        </div>\r\n      </div>}\r\n      \r\n      <div>\r\n          {clearUsers && <button onClick={clearUsers}>Clear Players</button>}\r\n          {resetScores && <button onClick={resetScores}>Reset Scores</button>}\r\n          {addUser && <button onClick={addUser}>Add Player</button>}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Controls","import React from 'react'\r\n\r\nconst ScoreBoard = ({users, scores}) => {\r\n\r\n  if(!users || !users.length) {\r\n    return (<div className=\"scores empty\">\r\n    <div className=\"max-width\">\r\n      There are currently no players added\r\n    </div>\r\n  </div>)\r\n  }\r\n\r\n  return (<div style={{gridTemplateColumns: `repeat(${users.length}, 1fr)`, gridTemplateRows: `min-content`}} className=\"game-scores\">\r\n    {users.map(u => {\r\n      return <div key={u} className=\"blue container\">\r\n        <div className=\"name\">{u}</div>\r\n        <div className=\"score center\"><span className=\"dollar\">$</span>{scores[u]}</div>\r\n      </div>\r\n    })}\r\n  </div>)\r\n}\r\n\r\nexport default ScoreBoard","import { useCallback, useState, useEffect } from 'react'\nimport { getInitQuestions, useLocalStorage } from './helpers'\nimport { GameBoard, Question, Controls, ScoreBoard } from './components'\n\nimport qs from './questions'\n\n//const initQuestionMap = getInitQuestions(qs)\n//const initUsers = ['Anne', 'Andrew']\nconst initQuestionMap = {}\nconst initUsers = []\nconst possibleOtherKeys = ['ControlLeft', 'ControlRight', 'ArrowLeft', 'ArrowRight','ArrowDown', 'ArrowUp', 'AltLeft', 'AltRight', 'ShiftLeft', 'ShiftRight', 'Enter']\n\n\nfunction Content({questionMap, markAnswered, users, scores, clickerKeys, possibleOtherKeys}) {\n\n  const [selected, setSelected] = useState(null)\n\n  const goBack = useCallback(() => {\n    setSelected(null)\n  }, [setSelected])\n\n  if(selected) {\n    return <Question question={selected} markAnswered={(q, u) => {\n      markAnswered(q, u)\n      setSelected(null)\n    }} goBack={goBack} users={users} clickerKeys={clickerKeys} possibleOtherKeys={possibleOtherKeys}/>\n  }\n  \n  return (<GameBoard possibleOtherKeys={possibleOtherKeys} questionMap={questionMap} setQuestion={setSelected} scores={scores} />);\n}\n\nfunction Game() {\n\n  const [questionMap, setQuestionMap] = useLocalStorage('questionMap', initQuestionMap)\n  const [users, setUsers] = useLocalStorage('users', initUsers)\n  const [scores, setScores] = useLocalStorage('userScores', {})\n\n  const [clickerKeys, setClickerKeys] = useLocalStorage('userClickerKeys', {})\n\n  useEffect(() => {\n    setScores(sc => {\n      return users.reduce((acc, user) => {\n        acc[user] = sc[user] || 0\n        return acc\n      }, {})\n    })\n    setClickerKeys(sc => {\n      return users.reduce((acc, user) => {\n        acc[user] = sc[user] || ''\n        return acc\n      }, {})\n    })\n  }, [users])\n\n  const markAnswered = useCallback((question, user) => {\n    setQuestionMap(qm => ({\n      ...qm,\n      [question.category]: {\n        ...qm[question.category],\n        [question.value]: {\n          ...question.value,\n          answered: true\n        }\n      }\n    }))\n    if(user) {\n      setScores(sc => ({\n        ...sc,\n        [user]: sc[user] + question.value\n      }))\n    }\n  }, [setQuestionMap, setScores])\n\n  const addUser = useCallback(() => {\n    let newUser = window.prompt(`Enter player ${users.length+1} name:`)\n    if(newUser) {\n      setUsers(u => u.concat(newUser))\n    }\n  }, [setUsers, users])\n\n  const clearUsers = useCallback(() => {\n    setUsers([])\n  }, [setUsers])\n\n  const resetScores = useCallback(() => {\n    setScores(users.reduce((acc, u) => {\n      acc[u] = 0;\n      return acc\n    }, {}))\n  }, [users, setScores])\n\n  const setQuestions = useCallback((csvText) => {\n    setQuestionMap(getInitQuestions(csvText))\n  }, [setQuestionMap])\n\n  const setClickerKey = useCallback((u, key) => {\n    if(!u) {\n      return\n    }\n    setClickerKeys(cks => ({\n      ...cks,\n      [u]: key || ''\n    }))\n  }, [setClickerKeys])\n\n\n\n  return <>\n  <div className=\"controls\">\n    <Controls possibleOtherKeys={possibleOtherKeys} setClickerKey={setClickerKey} users={users} addUser={addUser} clearUsers={users.length > 0 && clearUsers} resetScores={users.length > 0 && resetScores} setQuestions={setQuestions} clickerKeys={clickerKeys} />\n  </div>\n  <div className=\"game\">\n    <Content possibleOtherKeys={possibleOtherKeys} questionMap={questionMap} users={users} scores={scores} markAnswered={markAnswered} clickerKeys={clickerKeys} />\n    <ScoreBoard users={users} scores={scores} />\n  </div>\n  </>\n}\n\nexport default Game;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './Game';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nconst Index = () => {\n  return <Router basename={process.env.PUBLIC_URL}>\n  <Switch>\n    <Route exact path=\"/\">\n      <Game />\n    </Route>\n  </Switch>\n</Router>\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <Index />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}